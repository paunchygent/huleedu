# Auto-generated development Dockerfile for language_tool_service
ARG DEPS_IMAGE=huledu-deps:dev
FROM ${DEPS_IMAGE} AS base

ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PDM_USE_VENV=false \
    PDM_IGNORE_ACTIVE_VENV=1 \
    PROJECT_ROOT=/app \
    PYTHONPATH=/app \
    ENV_TYPE=docker

RUN apt-get update && apt-get install -y \
    --no-install-recommends \
    wget \
    unzip \
    openjdk-21-jre-headless \
    && rm -rf /var/lib/apt/lists/*
RUN mkdir -p /app/languagetool && \
    cd /app/languagetool && \
    wget -q https://languagetool.org/download/LanguageTool-stable.zip && \
    unzip -q LanguageTool-stable.zip && \
    mv LanguageTool-*/* . && \
    rm -rf LanguageTool-* LanguageTool-stable.zip
WORKDIR /app

FROM base AS development
COPY --chown=appuser:appuser services/language_tool_service/ /app/services/language_tool_service/
USER appuser
WORKDIR /app
CMD ["pdm", "run", "-p", "/app", "python", "services/language_tool_service/app.py"]
